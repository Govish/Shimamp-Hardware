(kicad_sch (version 20230121) (generator eeschema)

  (uuid 91f723fe-8dcd-46a9-a507-f5645c33e833)

  (paper "A4")

  (title_block
    (title "Shim Amplifier Prototype")
    (date "2023-08-01")
    (rev "A.1")
    (company "Ishaan Govindarajan")
  )

  (lib_symbols
    (symbol "Custom-LogicIC:TestPoint" (in_bom no) (on_board yes)
      (property "Reference" "TP" (at 2.54 0 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "-" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Footprint" "TestPoint:TestPoint_Pad_D2.0mm" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "" (at 0 2.54 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "test point tp" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Generic Test Point Symbol " (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "TestPoint_1_1"
        (polyline
          (pts
            (xy -0.762 1.27)
            (xy 0 0.508)
          )
          (stroke (width 0) (type default) (color 72 0 0 1))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -0.508 1.524)
            (xy 0.254 0.762)
          )
          (stroke (width 0) (type default) (color 72 0 0 1))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -1.27 0)
            (xy -0.762 1.016)
            (xy -0.254 0.508)
            (xy -1.27 0)
          )
          (stroke (width 0) (type default))
          (fill (type color) (color 132 0 0 1))
        )
        (polyline
          (pts
            (xy -0.762 1.016)
            (xy 0.508 2.286)
            (xy 1.016 1.778)
            (xy -0.254 0.508)
            (xy -0.762 1.016)
          )
          (stroke (width 0) (type default))
          (fill (type color) (color 132 0 0 1))
        )
        (arc (start 1.778 2.286) (mid 1.2343 2.3019) (end 0.762 2.032)
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (arc (start 1.778 2.286) (mid 2.032 2.258) (end 2.286 2.286)
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (pin passive line (at -2.54 0 0) (length 1.27)
          (name "" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 0 0))))
        )
      )
    )
    (symbol "Custom-Resistor:VMS-R010-1.0-U" (pin_numbers hide) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "R" (at 2.54 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "10mR 4W" (at -2.54 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "Custom-RLC:R_2512_6332_CURRENT_SHUNT" (at 1.016 -0.254 90)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "https://www.isabellenhuetteusa.com/wp-content/uploads/2020/05/VMS.pdf" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Manufacturer" "Isabellenhuette USA" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Part Number" "VMS-R010-1.0-U" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "R res resistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "ISABELLENHUETTE USA RES 0.01 OHM 1% 4W 2512" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "R_*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "VMS-R010-1.0-U_0_1"
        (polyline
          (pts
            (xy 0 -2.286)
            (xy 0 -2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 2.286)
            (xy 0 2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 3.81 -2.54)
            (xy 0 -2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 3.81 2.54)
            (xy 0 2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 -0.762)
            (xy 1.016 -1.143)
            (xy 0 -1.524)
            (xy -1.016 -1.905)
            (xy 0 -2.286)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 0.762)
            (xy 1.016 0.381)
            (xy 0 0)
            (xy -1.016 -0.381)
            (xy 0 -0.762)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 2.286)
            (xy 1.016 1.905)
            (xy 0 1.524)
            (xy -1.016 1.143)
            (xy 0 0.762)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "VMS-R010-1.0-U_1_1"
        (pin passive line (at 0 3.81 270) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 3.81 3.81 270) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 3.81 -3.81 90) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "4" (effects (font (size 1.27 1.27))))
        )
      )
    )
  )

  (junction (at 234.95 88.9) (diameter 0) (color 0 0 0 0)
    (uuid 055b96af-b0b6-454d-a5ab-e18a4d34b09f)
  )
  (junction (at 69.85 149.86) (diameter 0) (color 0 0 0 0)
    (uuid 0646362b-ca6c-4544-807d-1342a8ed616d)
  )
  (junction (at 62.23 152.4) (diameter 0) (color 0 0 0 0)
    (uuid 298ef639-f18a-4456-ae33-a3f121a52ed2)
  )
  (junction (at 137.16 139.7) (diameter 0) (color 0 0 0 0)
    (uuid 383cab4a-fee3-48a4-a11e-655cc687ac03)
  )
  (junction (at 77.47 116.84) (diameter 0) (color 0 0 0 0)
    (uuid 517a7f27-be4f-459c-8726-962106f6dbe1)
  )
  (junction (at 144.78 142.24) (diameter 0) (color 0 0 0 0)
    (uuid 5a10ac6e-1015-4f2a-b667-c9b59e45c889)
  )
  (junction (at 77.47 176.53) (diameter 0) (color 0 0 0 0)
    (uuid 5c720610-655e-4ecd-8415-653a1d879e2b)
  )
  (junction (at 62.23 121.92) (diameter 0) (color 0 0 0 0)
    (uuid 6e20a971-e28a-45cb-bf98-cf31e3908f82)
  )
  (junction (at 227.33 86.36) (diameter 0) (color 0 0 0 0)
    (uuid 705cc6f7-0ab2-49ae-9ac4-791a7998ff13)
  )
  (junction (at 62.23 181.61) (diameter 0) (color 0 0 0 0)
    (uuid 8bf2b902-6b60-4b97-8bec-9d8741516ddf)
  )
  (junction (at 137.16 53.34) (diameter 0) (color 0 0 0 0)
    (uuid 97f6d24c-740d-4abd-bac9-454953841e1e)
  )
  (junction (at 69.85 119.38) (diameter 0) (color 0 0 0 0)
    (uuid bef9f561-fb5a-43b9-b1f7-e89396eabab8)
  )
  (junction (at 69.85 179.07) (diameter 0) (color 0 0 0 0)
    (uuid c76e9740-c1de-4816-90b3-08e7a7fad003)
  )
  (junction (at 77.47 147.32) (diameter 0) (color 0 0 0 0)
    (uuid f3c4a75a-1eea-4319-997e-03ce514653bd)
  )
  (junction (at 144.78 68.58) (diameter 0) (color 0 0 0 0)
    (uuid f8c13003-2fd2-4bc4-89ff-10eea4c58eff)
  )

  (wire (pts (xy 69.85 93.98) (xy 180.34 93.98))
    (stroke (width 0) (type default))
    (uuid 00d6881a-9f1e-4356-adf7-c940422e952f)
  )
  (wire (pts (xy 152.4 184.15) (xy 162.56 184.15))
    (stroke (width 0) (type default))
    (uuid 050996b3-0906-4be3-8181-68e43af41e8b)
  )
  (wire (pts (xy 227.33 86.36) (xy 227.33 111.76))
    (stroke (width 0) (type default))
    (uuid 093929f4-95c5-4208-a71b-dfb53ade1e82)
  )
  (wire (pts (xy 144.78 142.24) (xy 144.78 68.58))
    (stroke (width 0) (type default))
    (uuid 0a7f8f32-6e29-46ae-9860-4f0ebb603705)
  )
  (wire (pts (xy 137.16 53.34) (xy 196.85 53.34))
    (stroke (width 0) (type default))
    (uuid 0fd7c049-5f5e-474c-a56c-91d9da324921)
  )
  (wire (pts (xy 62.23 152.4) (xy 62.23 121.92))
    (stroke (width 0) (type default))
    (uuid 127cfe2b-4f61-4c8f-95b7-7b958c1c912b)
  )
  (wire (pts (xy 69.85 179.07) (xy 88.9 179.07))
    (stroke (width 0) (type default))
    (uuid 19c9b4cd-caa9-4499-8c21-29db1b9234be)
  )
  (wire (pts (xy 196.85 57.15) (xy 195.58 57.15))
    (stroke (width 0) (type default))
    (uuid 1e4f9f77-717b-4cf2-ac0e-bda566d65911)
  )
  (wire (pts (xy 220.98 86.36) (xy 227.33 86.36))
    (stroke (width 0) (type default))
    (uuid 268a7859-8866-4665-8bbd-698090d99081)
  )
  (wire (pts (xy 220.98 111.76) (xy 227.33 111.76))
    (stroke (width 0) (type default))
    (uuid 29f4a970-844c-4412-9fc0-9af8afc9da43)
  )
  (wire (pts (xy 40.64 53.34) (xy 137.16 53.34))
    (stroke (width 0) (type default))
    (uuid 2b108530-b0e8-49f5-9dff-26877b620678)
  )
  (polyline (pts (xy 173.99 78.74) (xy 260.35 78.74))
    (stroke (width 0) (type dash))
    (uuid 2d87c4ca-bac5-42d9-b90e-c17ac07b7ac0)
  )

  (wire (pts (xy 152.4 191.77) (xy 162.56 191.77))
    (stroke (width 0) (type default))
    (uuid 2f550f87-763f-40e1-9432-0a1452fe3539)
  )
  (wire (pts (xy 77.47 116.84) (xy 180.34 116.84))
    (stroke (width 0) (type default))
    (uuid 35c33be9-f268-4048-bb19-69932941703d)
  )
  (wire (pts (xy 40.64 139.7) (xy 88.9 139.7))
    (stroke (width 0) (type default))
    (uuid 35de3f0c-eddb-4e8e-be1a-47de0008212b)
  )
  (wire (pts (xy 69.85 149.86) (xy 69.85 119.38))
    (stroke (width 0) (type default))
    (uuid 37b54afd-7658-4ff2-a32b-084d6cec80ba)
  )
  (wire (pts (xy 62.23 181.61) (xy 62.23 152.4))
    (stroke (width 0) (type default))
    (uuid 3aed8eea-5329-4899-b12a-249cb0a63250)
  )
  (wire (pts (xy 129.54 142.24) (xy 144.78 142.24))
    (stroke (width 0) (type default))
    (uuid 3dfad7c8-714a-42b6-975d-4370e5a2c2d0)
  )
  (wire (pts (xy 144.78 68.58) (xy 261.62 68.58))
    (stroke (width 0) (type default))
    (uuid 3e12bdae-9612-4cd3-8216-f30314a19a25)
  )
  (wire (pts (xy 152.4 186.69) (xy 162.56 186.69))
    (stroke (width 0) (type default))
    (uuid 4560589f-0e6e-402d-9225-2a0d3856f4ef)
  )
  (wire (pts (xy 40.64 111.76) (xy 180.34 111.76))
    (stroke (width 0) (type default))
    (uuid 461308dc-65be-4a8e-b953-f05f659803f7)
  )
  (wire (pts (xy 77.47 91.44) (xy 180.34 91.44))
    (stroke (width 0) (type default))
    (uuid 4685b361-0511-480f-a49c-10a5cdffda63)
  )
  (polyline (pts (xy 173.99 78.74) (xy 173.99 102.87))
    (stroke (width 0) (type dash))
    (uuid 4863162c-b45e-4496-8c32-245d290ead82)
  )

  (wire (pts (xy 40.64 68.58) (xy 144.78 68.58))
    (stroke (width 0) (type default))
    (uuid 4b17f946-19b4-441b-b6b7-cc97872161e4)
  )
  (wire (pts (xy 77.47 147.32) (xy 77.47 176.53))
    (stroke (width 0) (type default))
    (uuid 4c5b23e7-b146-4ec5-8ab2-16a0fc9314fa)
  )
  (wire (pts (xy 62.23 152.4) (xy 88.9 152.4))
    (stroke (width 0) (type default))
    (uuid 4d7d3ef1-bea1-4331-b7f5-71c61729b081)
  )
  (wire (pts (xy 40.64 168.91) (xy 88.9 168.91))
    (stroke (width 0) (type default))
    (uuid 53d593d1-5096-4e71-8ffe-dde53f2eb236)
  )
  (wire (pts (xy 144.78 142.24) (xy 144.78 171.45))
    (stroke (width 0) (type default))
    (uuid 578ee239-b56c-494c-a49d-fa16fa532992)
  )
  (wire (pts (xy 77.47 147.32) (xy 77.47 116.84))
    (stroke (width 0) (type default))
    (uuid 5b50996a-1917-4881-8103-77ca5e01d4cd)
  )
  (wire (pts (xy 88.9 181.61) (xy 62.23 181.61))
    (stroke (width 0) (type default))
    (uuid 5b7c8abd-0288-4266-a618-9d2705dcf4fb)
  )
  (wire (pts (xy 77.47 116.84) (xy 77.47 91.44))
    (stroke (width 0) (type default))
    (uuid 5c19ad12-5000-402f-89f2-3065d7f30454)
  )
  (wire (pts (xy 144.78 171.45) (xy 129.54 171.45))
    (stroke (width 0) (type default))
    (uuid 6770941a-52bd-482e-97c0-87e3a28027ab)
  )
  (wire (pts (xy 220.98 88.9) (xy 234.95 88.9))
    (stroke (width 0) (type default))
    (uuid 67e3786e-28c7-43c9-8508-facfa46bab11)
  )
  (wire (pts (xy 234.95 57.15) (xy 234.95 88.9))
    (stroke (width 0) (type default))
    (uuid 6f1459b0-7417-42ee-a510-4261f2016401)
  )
  (wire (pts (xy 69.85 119.38) (xy 180.34 119.38))
    (stroke (width 0) (type default))
    (uuid 76c317a2-4cc6-4fc7-bfd8-408c135dbde1)
  )
  (wire (pts (xy 129.54 168.91) (xy 137.16 168.91))
    (stroke (width 0) (type default))
    (uuid 79f14d8c-f698-45fb-a637-9d179960e2cb)
  )
  (wire (pts (xy 195.58 57.15) (xy 195.58 59.69))
    (stroke (width 0) (type default))
    (uuid 7b574dbf-c676-48e8-99ac-f153432a66ba)
  )
  (wire (pts (xy 69.85 149.86) (xy 69.85 179.07))
    (stroke (width 0) (type default))
    (uuid 7cfd15b4-dcef-4c09-a876-7e4b3c18c6b2)
  )
  (wire (pts (xy 204.47 53.34) (xy 261.62 53.34))
    (stroke (width 0) (type default))
    (uuid 867378c4-ef71-4f6f-8f72-ceb1edabe3ab)
  )
  (wire (pts (xy 195.58 59.69) (xy 227.33 59.69))
    (stroke (width 0) (type default))
    (uuid 86d04d7a-aa3c-4ea2-bb21-c46e728d02d3)
  )
  (wire (pts (xy 40.64 142.24) (xy 88.9 142.24))
    (stroke (width 0) (type default))
    (uuid 8ca20611-2834-4ef2-97e6-ad9fd88206fa)
  )
  (polyline (pts (xy 260.35 102.87) (xy 173.99 102.87))
    (stroke (width 0) (type dash))
    (uuid 8e06e5d6-488a-4439-bdbd-5dd82ae9abb7)
  )

  (wire (pts (xy 234.95 88.9) (xy 234.95 114.3))
    (stroke (width 0) (type default))
    (uuid 9a741bad-2629-4c38-976a-d7bc05b5778a)
  )
  (wire (pts (xy 137.16 139.7) (xy 137.16 53.34))
    (stroke (width 0) (type default))
    (uuid a07d353f-bec4-458e-a124-2adbfe5e6dda)
  )
  (wire (pts (xy 62.23 96.52) (xy 180.34 96.52))
    (stroke (width 0) (type default))
    (uuid a837313c-0865-47f3-b619-7043f6c73448)
  )
  (wire (pts (xy 40.64 171.45) (xy 88.9 171.45))
    (stroke (width 0) (type default))
    (uuid b2da55f0-6118-4b45-be8d-3325e8bd452e)
  )
  (wire (pts (xy 88.9 176.53) (xy 77.47 176.53))
    (stroke (width 0) (type default))
    (uuid b3a9589b-6090-4f4b-ae16-5f8c5e8fdd3e)
  )
  (polyline (pts (xy 260.35 78.74) (xy 260.35 102.87))
    (stroke (width 0) (type dash))
    (uuid b4bd56c9-3b41-4853-bcdd-34ab194c8c4e)
  )

  (wire (pts (xy 40.64 181.61) (xy 62.23 181.61))
    (stroke (width 0) (type default))
    (uuid bed0d3bb-1529-46b0-81d5-42559d88b772)
  )
  (wire (pts (xy 69.85 93.98) (xy 69.85 119.38))
    (stroke (width 0) (type default))
    (uuid c15be7fa-2326-4788-be29-11c6fbe187de)
  )
  (wire (pts (xy 62.23 121.92) (xy 180.34 121.92))
    (stroke (width 0) (type default))
    (uuid c1652dd6-4581-45b4-8ec5-ce8d18edb0ac)
  )
  (wire (pts (xy 227.33 59.69) (xy 227.33 86.36))
    (stroke (width 0) (type default))
    (uuid ca9f695d-128c-4015-8757-bc882bcbd987)
  )
  (wire (pts (xy 40.64 176.53) (xy 77.47 176.53))
    (stroke (width 0) (type default))
    (uuid d2a8c56a-19d4-4aca-90a4-d6adb9840c74)
  )
  (wire (pts (xy 69.85 149.86) (xy 88.9 149.86))
    (stroke (width 0) (type default))
    (uuid da8b0d3e-847f-44af-a87a-10eeac3a7d55)
  )
  (wire (pts (xy 220.98 114.3) (xy 234.95 114.3))
    (stroke (width 0) (type default))
    (uuid dc8d5e9c-4923-49c1-8e6a-3a41e5bc6049)
  )
  (wire (pts (xy 77.47 147.32) (xy 88.9 147.32))
    (stroke (width 0) (type default))
    (uuid dec25b0e-3c85-4cc2-ada7-4e973502000e)
  )
  (wire (pts (xy 137.16 168.91) (xy 137.16 139.7))
    (stroke (width 0) (type default))
    (uuid e2ed4dc8-98be-4f92-a685-839815f8ca43)
  )
  (wire (pts (xy 152.4 189.23) (xy 162.56 189.23))
    (stroke (width 0) (type default))
    (uuid e7953993-9b31-4704-b00b-14891d280119)
  )
  (wire (pts (xy 62.23 96.52) (xy 62.23 121.92))
    (stroke (width 0) (type default))
    (uuid e99dbf13-b843-4dfb-a204-ad67a84aff1d)
  )
  (wire (pts (xy 129.54 139.7) (xy 137.16 139.7))
    (stroke (width 0) (type default))
    (uuid f8a6ae75-7e72-4373-a8e1-b1d4e06cb88f)
  )
  (wire (pts (xy 40.64 179.07) (xy 69.85 179.07))
    (stroke (width 0) (type default))
    (uuid fade2b51-d483-4f6c-a62c-0e8d628ee49b)
  )
  (wire (pts (xy 40.64 86.36) (xy 180.34 86.36))
    (stroke (width 0) (type default))
    (uuid fe50da3c-c125-4726-b275-1533364757ba)
  )
  (wire (pts (xy 204.47 57.15) (xy 234.95 57.15))
    (stroke (width 0) (type default))
    (uuid febcf6ee-bc23-4f77-9d2c-05680b748fe7)
  )

  (text_box "This schematic page captures the output voltage and current sensing circuitry. A feedback loop will be closed around both voltage and current, allowing for the stabilization of plants with slightly different dynamics. These sensors must provide minimal distortion up to the controllers' unity gain frequency while maximally attenuating energy at frequencies beyond. Additionally, sensing circuit must have good common-mode rejection (CMR) to minimize sensitivity to power stage switching. \n\nTo achieve these objectives, a fully-differential amplifier topology was chosen for voltage sensing. The fully-differential topology maximizes CMR (>75dB from the amplifier, more from the MCU, ADC), and allows for the implementation of a high-order active filter. The cutoff frequency of this filter was chosen such that it has near-zero phase up to the voltage controller crossover frequency (~40-50kHz). This improves stability and phase margin. \n\nFor current sensing, an INA241x series amplifier was chosen for its low offset, noise, and high CMR (~80dB @ 1MHz). Due to its higher CMR, current measurements will be made with a simpler single-ended sensing technique, filtered with a simpler first-order RC filter. The zero-current reference is selected to place a reading of 0A in the middle of the MCU ADC range.\n\nAdditionally, both of these measurements benefit from a large dynamic range, and may run into resolution limits with the MCU's 12-bit ADC. As such, ADC channels may be \"stacked\"--one ADC channel will handle will handle the full voltage/current range, and the other will handle measurements close to zero with a 10x greater resolution (at a cost of 10x reduced dynamic range). This measurement strategy is likely needed for voltage sensing, but may not be needed for current sensing."
    (at 15.24 15.24 0) (size 168.91 33.02)
    (stroke (width 0) (type default) (color 132 0 0 1))
    (fill (type color) (color 255 255 194 1))
    (effects (font (size 1.27 1.27) (color 132 0 0 1)) (justify left top))
    (uuid 2fc35c07-bba0-40f3-b3b8-940cc1416d01)
  )
  (text_box "Calculations/simulations for the voltage sensing crcuitry can be found under the 'simulations' folder in my Dropbox"
    (at 227.33 147.32 0) (size 54.61 15.24)
    (stroke (width 0.25) (type default) (color 132 0 0 1))
    (fill (type color) (color 255 255 194 1))
    (effects (font (size 2 2) (thickness 0.254) bold (color 132 0 0 1)) (justify left top))
    (uuid 4a7e0b68-777b-453a-bb24-238677b90e14)
  )
  (text_box "Likely unnecessary, but including in schematic in the event that it is"
    (at 238.76 85.09 0) (size 19.05 12.7)
    (stroke (width 0) (type default) (color 132 0 0 1))
    (fill (type color) (color 255 255 194 1))
    (effects (font (size 1.27 1.27) (color 132 0 0 1)) (justify left top))
    (uuid 8f452558-b555-4f19-b38e-25a3bb247769)
  )
  (text_box "Voltage measurement is made before current shunt to ensure minimum load resistance of the plant. This helps stabilize the controller across a larger range of loads"
    (at 77.47 55.88 0) (size 57.15 10.16)
    (stroke (width 0) (type default) (color 132 0 0 1))
    (fill (type color) (color 255 255 194 1))
    (effects (font (size 1.27 1.27) (color 132 0 0 1)) (justify left top))
    (uuid c99a0555-3fc7-4feb-b3b6-7c1e8c39f9f2)
  )
  (text_box "Current shunt resistor sized for +/-10A; will dissipate ~1W, so power rating is derated for extra stability and general headroom\n\nResistor specified at 1%, 20ppm/C"
    (at 217.17 34.29 0) (size 38.1 13.97)
    (stroke (width 0) (type default) (color 132 0 0 1))
    (fill (type color) (color 255 255 194 1))
    (effects (font (size 1.27 1.27) (color 132 0 0 1)) (justify left top))
    (uuid e77704a8-ad88-4612-8fad-c2c691d84541)
  )

  (label "IN-" (at 139.7 68.58 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 0ba32fd2-965b-48fc-8898-233d085413b7)
  )
  (label "IS-" (at 152.4 186.69 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 103b4f2f-e462-40b7-99c4-918a4c5b9d8c)
  )
  (label "IS-" (at 212.09 57.15 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 15590dfd-67d3-4402-af79-886b74103502)
  )
  (label "IS+" (at 152.4 184.15 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 1d0d6799-0faa-4e5f-a6b9-1f89a5e1fe4a)
  )
  (label "IN+" (at 152.4 189.23 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 2b880532-36be-41c7-a8b1-c46f6339b91b)
  )
  (label "IN-" (at 152.4 191.77 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 4986e410-587f-40d8-a5a0-d4ef5bde3f9a)
  )
  (label "IN+" (at 139.7 53.34 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 6b7844cd-bf18-4c9e-8eeb-b553202f2c7a)
  )
  (label "+3.3V" (at 48.26 176.53 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 9bbca7b3-9841-4fc0-bfac-5cc735e9218d)
  )
  (label "GND" (at 48.26 181.61 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid e4676b87-33a2-49bd-a8be-3f2d82a59256)
  )
  (label "VREF" (at 48.26 179.07 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid fac8430c-e1e3-4ed5-b241-876395472495)
  )
  (label "IS+" (at 212.09 59.69 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid ff38f6c1-5225-4a0f-92bd-71930a51c5ee)
  )

  (hierarchical_label "ISEN1x" (shape output) (at 40.64 111.76 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 0fdd0da7-35b0-444a-a0bd-8594b5fe98c1)
  )
  (hierarchical_label "IN+" (shape input) (at 40.64 53.34 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 14cabe69-01ed-45dc-b1bb-e96e5c0bb6df)
  )
  (hierarchical_label "IN-" (shape input) (at 40.64 68.58 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 29b8962c-e5c7-4d15-b233-9440a7ef4a21)
  )
  (hierarchical_label "OUT-" (shape output) (at 261.62 68.58 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 301b3c36-3281-4818-8e57-22d4487e5d26)
  )
  (hierarchical_label "VSEN10x-" (shape output) (at 40.64 142.24 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 37557e8e-7016-4940-a867-fecb04dfe22a)
  )
  (hierarchical_label "ISEN10x" (shape output) (at 40.64 86.36 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 6a78ea57-46df-465a-a502-7d49f42bc519)
  )
  (hierarchical_label "VSEN10x+" (shape output) (at 40.64 139.7 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 77832bb9-59f0-4682-b922-6283ca11975a)
  )
  (hierarchical_label "VSEN1x-" (shape output) (at 40.64 171.45 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 95e7aec9-9534-416f-8e3b-62d5a662f49f)
  )
  (hierarchical_label "+3.3V" (shape passive) (at 40.64 176.53 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 9d513cd4-0496-469a-8146-6c230c6e8fd8)
  )
  (hierarchical_label "VREF" (shape passive) (at 40.64 179.07 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid b4b8b6a4-d91e-44b8-9662-c5903ca49a19)
  )
  (hierarchical_label "GND" (shape passive) (at 40.64 181.61 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid b6a3f211-5c8f-4e76-b99d-c708599a7fe5)
  )
  (hierarchical_label "VSEN1x+" (shape output) (at 40.64 168.91 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid fb61ea0f-49f9-4f57-8ccd-66cc25a6105a)
  )
  (hierarchical_label "OUT+" (shape output) (at 261.62 53.34 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid fc429b32-a8b2-4895-868a-77e5fd15e918)
  )

  (symbol (lib_id "Custom-LogicIC:TestPoint") (at 165.1 191.77 0) (unit 1)
    (in_bom no) (on_board yes) (dnp no)
    (uuid 14257f2d-760e-4cab-a3ae-375005591d3e)
    (property "Reference" "TP29" (at 167.64 190.5 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "-" (at 165.1 191.77 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Footprint" "TestPoint:TestPoint_Pad_D2.0mm" (at 165.1 191.77 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 165.1 189.23 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 07c3d810-f6e8-4932-b16e-05fd21ef4ad0))
    (instances
      (project "Class-D Prototype revA"
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f"
          (reference "TP29") (unit 1)
        )
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f/089f594f-bb18-48b2-8c70-6ca483ca18fd"
          (reference "TP?") (unit 1)
        )
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f/78fe4b17-b0b6-4b6a-98aa-460b55bbd4c9"
          (reference "TP?") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Custom-Resistor:VMS-R010-1.0-U") (at 200.66 53.34 270) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 5c286683-3d48-445d-8c8c-c67e13aac624)
    (property "Reference" "R37" (at 200.66 46.99 90)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "10mR 4W" (at 200.66 49.53 90)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Custom-RLC:R_2512_6332_CURRENT_SHUNT" (at 200.406 54.356 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "https://www.isabellenhuetteusa.com/wp-content/uploads/2020/05/VMS.pdf" (at 200.66 53.34 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Manufacturer" "Isabellenhuette USA" (at 200.66 53.34 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Part Number" "VMS-R010-1.0-U" (at 200.66 53.34 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 8093c381-7068-40bb-ab8d-ad644450ab78))
    (pin "2" (uuid 4d9a181a-9b65-4ec6-a68f-bd9ad5f9b328))
    (pin "3" (uuid 5b3d42d8-5914-4630-a2d8-159312475f93))
    (pin "4" (uuid 230472f6-280f-4f44-a92e-4df40fbb3b52))
    (instances
      (project "Class-D Prototype revA"
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f"
          (reference "R37") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Custom-LogicIC:TestPoint") (at 165.1 184.15 0) (unit 1)
    (in_bom no) (on_board yes) (dnp no)
    (uuid 8d48b1c0-85b0-4431-99e3-79173a8c7491)
    (property "Reference" "TP26" (at 167.64 182.88 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "-" (at 165.1 184.15 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Footprint" "TestPoint:TestPoint_Pad_D2.0mm" (at 165.1 184.15 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 165.1 181.61 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 3d3d4fc5-a15b-4691-805e-765feeebcbae))
    (instances
      (project "Class-D Prototype revA"
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f"
          (reference "TP26") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Custom-LogicIC:TestPoint") (at 165.1 189.23 0) (unit 1)
    (in_bom no) (on_board yes) (dnp no)
    (uuid c1c6723b-c8ff-444a-91b5-c53dc6b4f42b)
    (property "Reference" "TP28" (at 167.64 187.96 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "-" (at 165.1 189.23 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Footprint" "TestPoint:TestPoint_Pad_D2.0mm" (at 165.1 189.23 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 165.1 186.69 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid d81bf10a-cc5a-4402-b801-3a9568faaca2))
    (instances
      (project "Class-D Prototype revA"
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f"
          (reference "TP28") (unit 1)
        )
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f/089f594f-bb18-48b2-8c70-6ca483ca18fd"
          (reference "TP?") (unit 1)
        )
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f/78fe4b17-b0b6-4b6a-98aa-460b55bbd4c9"
          (reference "TP?") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Custom-LogicIC:TestPoint") (at 165.1 186.69 0) (unit 1)
    (in_bom no) (on_board yes) (dnp no)
    (uuid e630b976-cd47-4631-a5c3-ff868b0032d3)
    (property "Reference" "TP27" (at 167.64 185.42 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "-" (at 165.1 186.69 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Footprint" "TestPoint:TestPoint_Pad_D2.0mm" (at 165.1 186.69 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 165.1 184.15 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 24db9b64-b329-4e74-ad2f-01f96137d445))
    (instances
      (project "Class-D Prototype revA"
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f"
          (reference "TP27") (unit 1)
        )
      )
    )
  )

  (sheet (at 88.9 137.16) (size 40.64 17.78) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid 089f594f-bb18-48b2-8c70-6ca483ca18fd)
    (property "Sheetname" "Voltage Sensor 10x" (at 88.9 136.4484 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "shimamp_VoltageSensor10.kicad_sch" (at 88.9 155.5246 0)
      (effects (font (size 1.27 1.27)) (justify left top))
    )
    (pin "VSEN-" output (at 88.9 142.24 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 91b052b8-3ce6-4130-9532-d7a95c0c4f69)
    )
    (pin "VSEN+" output (at 88.9 139.7 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 1eb524c5-2285-4c7c-9aa1-424707129592)
    )
    (pin "IN-" input (at 129.54 142.24 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 87a05be6-b9b4-49b2-b1f1-821ecf520ee8)
    )
    (pin "IN+" input (at 129.54 139.7 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 02c611d1-1d78-4044-96a3-c098ac4c3431)
    )
    (pin "GND" passive (at 88.9 152.4 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 90414def-0d27-4219-aec3-bd529b73f82c)
    )
    (pin "VREF" passive (at 88.9 149.86 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 18765856-131a-426a-a7c7-4e64566fc52a)
    )
    (pin "+3.3V" passive (at 88.9 147.32 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 506bbc3b-8fd0-40d9-b50a-a8ebc2a355f5)
    )
    (instances
      (project "Class-D Prototype revA"
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f" (page "12"))
      )
    )
  )

  (sheet (at 180.34 109.22) (size 40.64 15.24) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid 432da1d1-607a-4d6f-8318-b787ecd12739)
    (property "Sheetname" "Current Sensor 1x" (at 180.34 108.5084 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "shimamp_CurrentSensor1.kicad_sch" (at 180.34 125.0446 0)
      (effects (font (size 1.27 1.27)) (justify left top))
    )
    (pin "ISEN" output (at 180.34 111.76 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 551aa755-f111-4307-97b7-afb48436c5dc)
    )
    (pin "GND" passive (at 180.34 121.92 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid b6d78556-799b-4400-ae4a-e15451b57356)
    )
    (pin "+3.3V" passive (at 180.34 116.84 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid d9b21c40-65b9-48b1-8e36-1bdc12fe482c)
    )
    (pin "IS-" input (at 220.98 114.3 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid edca4035-4f87-47be-829b-07811f1b00c1)
    )
    (pin "VREF" passive (at 180.34 119.38 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 45bc5e24-10bf-45a1-bcc8-8e80c8521a30)
    )
    (pin "IS+" input (at 220.98 111.76 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid ae55d980-e8cd-4e89-abab-6adc31200e70)
    )
    (instances
      (project "Class-D Prototype revA"
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f" (page "15"))
      )
    )
  )

  (sheet (at 180.34 83.82) (size 40.64 15.24) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid 4b209ec1-3318-4bdd-9559-60ff7e441f66)
    (property "Sheetname" "Current Sensor 10x" (at 180.34 83.1084 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "shimamp_CurrentSensor10.kicad_sch" (at 180.34 99.6446 0)
      (effects (font (size 1.27 1.27)) (justify left top))
    )
    (pin "IS+" input (at 220.98 86.36 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 9bcb9ace-d1f2-4de5-9b44-a4d90e57f9d7)
    )
    (pin "GND" passive (at 180.34 96.52 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid d1d10d17-56da-4213-bbcc-c27573021814)
    )
    (pin "IS-" input (at 220.98 88.9 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 38ff1754-f41d-48da-bdac-bb76c6116bb1)
    )
    (pin "+3.3V" passive (at 180.34 91.44 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid a01d959e-f8e4-4fd7-9b2e-97ecfd307cf1)
    )
    (pin "VREF" passive (at 180.34 93.98 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 5b05419b-1958-407f-949c-a0f495ef991b)
    )
    (pin "ISEN" output (at 180.34 86.36 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 0ed2d69b-77c1-4257-ab7b-eddcfdc94051)
    )
    (instances
      (project "Class-D Prototype revA"
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f" (page "14"))
      )
    )
  )

  (sheet (at 88.9 166.37) (size 40.64 17.78) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid 78fe4b17-b0b6-4b6a-98aa-460b55bbd4c9)
    (property "Sheetname" "Voltage Sensor 1x" (at 88.9 165.6584 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "shimamp_VoltageSensor1.kicad_sch" (at 88.9 184.7346 0)
      (effects (font (size 1.27 1.27)) (justify left top))
    )
    (pin "GND" passive (at 88.9 181.61 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 70eb4282-7f04-4b67-8e2d-85d0303a1c3b)
    )
    (pin "VREF" passive (at 88.9 179.07 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 8b710311-d8e5-4de3-b12b-976e696e74db)
    )
    (pin "+3.3V" passive (at 88.9 176.53 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid af62791e-9538-477a-bc2b-5ac5f385a12e)
    )
    (pin "IN-" input (at 129.54 171.45 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 43a31673-aeee-48f2-b44c-6619811bdc54)
    )
    (pin "IN+" input (at 129.54 168.91 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 3a6611fe-dd24-4039-97f2-5838d74839c3)
    )
    (pin "VSEN+" output (at 88.9 168.91 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid e5ce99e6-2e48-43e8-81c5-71fd5a0c1dc1)
    )
    (pin "VSEN-" output (at 88.9 171.45 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid bf2eaef6-d036-4196-ae59-5c129e28de56)
    )
    (instances
      (project "Class-D Prototype revA"
        (path "/23908805-2652-4514-9ede-7241504aced4/61ac3c1d-6509-4210-bc8b-92800d1da86f" (page "13"))
      )
    )
  )
)
